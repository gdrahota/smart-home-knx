###############################################################################
# Base Stage
###############################################################################
FROM node:16-alpine as base-stage

WORKDIR /app

###############################################################################
# Build
###############################################################################
FROM base-stage AS sh-backend

COPY package* ./
COPY ./ ./
RUN npm i && npm cache clean --force
RUN npm run build
CMD ["npm", "run", "start"]

USER node
